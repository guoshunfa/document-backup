(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{405:function(a,t,o){"use strict";o.r(t);var c=o(44),s=Object(c.a)({},(function(){var a=this,t=a.$createElement,o=a._self._c||t;return o("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[o("h1",{attrs:{id:"tomcat-安装-服务启动与关闭"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#tomcat-安装-服务启动与关闭"}},[a._v("#")]),a._v(" Tomcat 安装/服务启动与关闭")]),a._v(" "),o("h2",{attrs:{id:"linux-contos7-安装-tomcat9"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#linux-contos7-安装-tomcat9"}},[a._v("#")]),a._v(" Linux ContOS7 安装 Tomcat9")]),a._v(" "),o("p",[a._v("为防止操作权限不足，建议切换root用户，当然如果你对Linux命令熟悉，能够自主完成权限更新操作，可以不考虑此推荐。")]),a._v(" "),o("p",[a._v("更多命令学习推荐：")]),a._v(" "),o("p",[o("strong",[a._v("1、下载Linux版Tomcat包")])]),a._v(" "),o("p",[a._v("tar.gz：Linux环境下的压缩包，免安装！")]),a._v(" "),o("p",[a._v("1、手动在Tomcat官网下载，并使用XFTP将文件上传至Linux指定目录下（为便于管理建议放在当前用户/home/XXX目录下）。")]),a._v(" "),o("p",[a._v("2、使用命令下载。（默认文件保存在当前登录用户所在目录）")]),a._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[a._v("wget  https://mirror.bit.edu.cn/apache/tomcat/tomcat-9/v9.0.39/bin/apache-tomcat-9.0.39.tar.gz\n")])])]),o("p",[o("strong",[a._v("2、解压安装Tomcat9")])]),a._v(" "),o("p",[a._v("1、在/usr/local目录下新建目录Apache。（用于存放Tomcat的安装位置）。")]),a._v(" "),o("p",[a._v("2、进入下载好的Tomcat压缩包地址路径，解压Tomcat至/usr/local/Apache目录中。")]),a._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[a._v("########进入目录查看下载的文件（Tomcat包）\n[root@localhost Apache]# cd /home/xsge/downfiles/\n[root@localhost downfiles]# ls\napache-tomcat-9.0.39.tar.gz  jdk-8u261-linux-x64.tar.gz\n\n########解压Tomcat包到指定目录\n[root@localhost downfiles]# tar -xvf apache-tomcat-9.0.39.tar.gz  -C  /usr/local/Apache\n")])])]),o("p",[a._v("3、进入解压目录检查")]),a._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[a._v("[root@localhost downfiles]# cd /usr/local/Apache\n[root@localhost Apache]# ls\napache-tomcat-9.0.39\n")])])]),o("p",[o("strong",[a._v("3、启动Tomcat程序")]),a._v("\n　　1、进入Tomcat安装目录。命令启动（默认绿色后缀为.sh的便是Linux的可执行脚本）")]),a._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[a._v("######进入Tomcat安装目录bin目录下\n[root@localhost bin]# cd /usr/local/Apache/apache-tomcat-9.0.39/bin\n\n######启动或关闭Tomcat\n[root@localhost bin]# ./startup.sh\n[root@localhost bin]# ./shutdown.sh\n")])])]),o("blockquote",[o("p",[a._v("说明：在window系统中启动脚本是.bat文件，在Linux系统中使用的是.sh文件。执行格式为： ./脚本")]),a._v(" "),o("p",[a._v("注意：如果.sh文件显示为灰色，且无法执行，则是因为权限不足，使用命令给脚本文件增加执行权限。")]),a._v(" "),o("p",[a._v("[root@localhost bin]# chmod  +x  *.sh    　　#给所有脚本文件增加执行权限")])]),a._v(" "),o("p",[a._v("启动信息如下：")]),a._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[a._v("[root@localhost bin]# ./startup.sh\nUsing CATALINA_BASE:   /usr/local/Apache/apache-tomcat-9.0.39\nUsing CATALINA_HOME:   /usr/local/Apache/apache-tomcat-9.0.39\nUsing CATALINA_TMPDIR: /usr/local/Apache/apache-tomcat-9.0.39/temp\nUsing JRE_HOME:        /usr/lib/jvm/jdk1.8.0_261\nUsing CLASSPATH:       /usr/local/Apache/apache-tomcat-9.0.39/bin/bootstrap.jar:/usr/local/Apacheapache-tomcat-9.0.39/bin/tomcat-juli.jar\nUsing CATALINA_OPTS:   \nTomcat started.\n[root@localhost bin]# \n")])])]),o("p",[a._v("如果希望查看启动详情，可以进入Tomcat的log目录查看显示日志信息")]),a._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[a._v('####进入Tomcat日志目录\n[root@localhost ~]# cd /usr/local/Apache/apache-tomcat-9.0.39/logs\n####查看日志信息\n[root@localhost logs]# tail -f catalina.out \n15-Oct-2020 13:49:22.162 信息 [main] org.apache.catalina.startup.HostConfig.deployDirectory 把web 应用程序部署到目录 [/usr/local/Apache/apache-tomcat-9.0.39/webapps/docs]\n15-Oct-2020 13:49:22.232 信息 [main] org.apache.catalina.startup.HostConfig.deployDirectory Web应用程序目录[/usr/local/Apache/apache-tomcat-9.0.39/webapps/docs]的部署已在[69]毫秒内完成\n15-Oct-2020 13:49:22.232 信息 [main] org.apache.catalina.startup.HostConfig.deployDirectory 把web 应用程序部署到目录 [/usr/local/Apache/apache-tomcat-9.0.39/webapps/examples]\n15-Oct-2020 13:49:23.294 信息 [main] org.apache.catalina.startup.HostConfig.deployDirectory Web应用程序目录[/usr/local/Apache/apache-tomcat-9.0.39/webapps/examples]的部署已在[1,062]毫秒内完成\n15-Oct-2020 13:49:23.295 信息 [main] org.apache.catalina.startup.HostConfig.deployDirectory 把web 应用程序部署到目录 [/usr/local/Apache/apache-tomcat-9.0.39/webapps/host-manager]\n15-Oct-2020 13:49:23.347 信息 [main] org.apache.catalina.startup.HostConfig.deployDirectory Web应用程序目录[/usr/local/Apache/apache-tomcat-9.0.39/webapps/host-manager]的部署已在[52]毫秒内完成\n15-Oct-2020 13:49:23.348 信息 [main] org.apache.catalina.startup.HostConfig.deployDirectory 把web 应用程序部署到目录 [/usr/local/Apache/apache-tomcat-9.0.39/webapps/manager]\n15-Oct-2020 13:49:23.410 信息 [main] org.apache.catalina.startup.HostConfig.deployDirectory Web应用程序目录[/usr/local/Apache/apache-tomcat-9.0.39/webapps/manager]的部署已在[63]毫秒内完成\n15-Oct-2020 13:49:23.429 信息 [main] org.apache.coyote.AbstractProtocol.start 开始协议处理句柄["http-nio-8080"]\n15-Oct-2020 13:49:23.456 信息 [main] org.apache.catalina.startup.Catalina.start [2211]毫秒后服务器启动\n')])])]),o("p",[o("strong",[a._v("4、测试访问")])]),a._v(" "),o("p",[a._v("1、如果你的CentOS安装了Linux界面，那么可以在Linux界面系统中打开浏览器输入访问地址")]),a._v(" "),o("p",[a._v("http://虚拟机ip地址或者localhost:8080/")]),a._v(" "),o("p",[a._v("（如果不知道自己虚拟机IP是多少，可以通过命令ifconfig查看）")]),a._v(" "),o("p",[a._v("访问举例：http://192.168.6.88:8080/　　　http://localhost:8080/")]),a._v(" "),o("p",[a._v("2、外部实体测试访问。")]),a._v(" "),o("p",[a._v("如果是外部主机想要访问Linux部署的Tomcat，必须使用ip访问，且需要直接关闭Linux防火墙。")]),a._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[a._v("####关闭防火墙\n[root@localhost bin]# service firewalld  stop\nRedirecting to /bin/systemctl stop firewalld.service\n")])])]),o("p",[a._v("测试访问：http://192.168.6.88:8080/")]),a._v(" "),o("blockquote",[o("p",[a._v("问题：防火墙是拦截规则加强系统安全的，Linux作为服务器主机使用，我们不建议关闭防火墙。可以通过为防火墙加设开放端口，实现允许外部访问。")]),a._v(" "),o("p",[a._v("如果是阿里云服务器，则需要保证阿里云的安全组策略是开放的！")]),a._v(" "),o("p",[a._v("（阿里云服务器部署问题，请参考：）")])]),a._v(" "),o("p",[a._v("配置防火墙加设开放端口，开启Linux的防火墙服务：")]),a._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[a._v("#查看firewall(防火墙)服务状态\nsystemctl status firewall　\n#开启、重启、关闭、firewalld.service服务\n#开启防火墙\nservice firewalld  start\n#重启防火墙\nservice firewalld  restart\n#关闭防火墙\nservice firewalld  stop\n#########查看防火墙规则\nfirewall-cmd --list-all　　 　　#查看全部信息\nfirewall-cmd --list-ports 　　 #只看端口信息\n#########添加防火墙开放端口\n开端口命令: firewall-cmd --zone=public --add-port=8080/tcp --permanent\n重启防火墙: systemctl restart firewalld.service\n命令含义:\n　　--zone 　　　　　　　　 #作用域（public标识公共的）\n　　--add-port=80/tcp 　　#添加端口， 格式为:端口/通讯协议\n　　--permanent 　　　　　　#永久生效，没有此参数重启后失效\n")])])]),o("blockquote",[o("p",[a._v("注意：加设防火墙开放端口中firewall-cmd是一个完整的命令，中间没有空格！（温馨提示，上面的命令中没有数字，如果你怕手敲错误，建议复制！）")])]),a._v(" "),o("p",[a._v("3、加设防火墙开放端口后，测试访问")]),a._v(" "),o("p",[a._v("访问地址举例：http://192.168.6.88:8080/")]),a._v(" "),o("p",[o("strong",[a._v("5、附录（Tomcat自启配置）")])]),a._v(" "),o("p",[a._v("1、Tomcat配置服务")]),a._v(" "),o("p",[a._v("新建服务脚本：")]),a._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[a._v("1 [root@localhost ~]# vim /etc/init.d/tomcat\n")])])]),o("p",[a._v("输入i、I、a等任意一个进入编辑模式，添加脚本内容：")]),a._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[a._v("#!/bin/bash\n# description: Tomcat7 Start Stop Restart\n# processname: tomcat7\n# chkconfig: 234 20 80\n\nCATALINA_HOME=/usr/local/tomcat/apache-tomcat-9.0.11\n\ncase $1 in\n        start)\n                sh $CATALINA_HOME/bin/startup.sh\n                ;;\n        stop)\n                sh $CATALINA_HOME/bin/shutdown.sh\n                ;;\n        restart)\n                sh $CATALINA_HOME/bin/shutdown.sh\n                sh $CATALINA_HOME/bin/startup.sh\n                ;;\n        *)\n                 echo 'please use : tomcat {start | stop | restart}'\n        ;;\nesac\nexit 0\n")])])]),o("p",[a._v("按ESC退出编辑输入命令 :wq 保存脚本。")]),a._v(" "),o("p",[a._v("执行脚本，启动、停止 和 重启服务。")]),a._v(" "),o("p",[a._v("启动：service tomcat start")]),a._v(" "),o("p",[a._v("停止：service tomcat stop")]),a._v(" "),o("p",[a._v("重启：service tomcat restart")]),a._v(" "),o("p",[a._v("2、Tomcat配置开机自启动")]),a._v(" "),o("p",[a._v("向chkconfig添加 tomcat 服务的管理")]),a._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[a._v("[root@localhost ~]# chkconfig --add tomcat\n")])])]),o("p",[a._v("设置tomcat服务自启动")]),a._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[a._v("[root@localhost ~]# chkconfig tomcat on\n")])])]),o("p",[a._v("查看tomcat的启动状态")]),a._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[a._v("[root@localhost ~]# chkconfig --list | grep tomcat\n状态如下：\n\n[root@localhost ~]# chkconfig --list | grep tomcat\n\ntomcat 0:off 1:off 2:on 3:on 4:on 5:on 6:off\n")])])]),o("p",[a._v("关闭tomcat服务自启动：chkconfig tomcat off")]),a._v(" "),o("p",[a._v("删除tomcat服务在chkconfig上的管理：chkconfig --del tomcat")])])}),[],!1,null,null,null);t.default=s.exports}}]);